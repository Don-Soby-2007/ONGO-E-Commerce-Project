{% extends 'accounts/base_profile.html' %}
{% load static %}

{% block title %}Manage Address - ONGO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/accounts/manage_address.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/accounts/manage_address.js' %}"></script>
{% endblock %}

{% block profile_content %}
<main class="flex-1 overflow-y-auto p-8 md:p-16 bg-gray-50 flex flex-col items-center justify-start w-full">

    <!-- Breadcrumb -->
    <div class="w-full max-w-4xl mb-10">
        <p class="text-sm text-gray-500"><a href="{% url 'home' %}" class="hover:text-black transition-colors">Home</a>
            / <a href="{% url 'profile' %}" class="hover:text-black transition-colors">Account</a> / <span
                class="text-black font-semibold">Address</span>
        </p>
        <div class="flex flex-row items-center justify-between mt-4 gap-6">
            <h2 class="text-3xl font-bold text-black">Manage Address</h2>
            <!-- Add Address Button (Right) -->
            <a href="{% url 'add_address' %}"
                class="bg-black text-white px-5 py-2.5 rounded-lg text-sm font-medium hover:bg-gray-800 transition-all flex items-center shadow-md shrink-0">
                <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                Add address
            </a>
        </div>
    </div>

    <!-- Addresses Grid -->
    <div class="w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for address in addresses %}
        <!-- Address Card (Default) -->
        <div
            class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow relative group">
            <div class="flex justify-between items-start mb-4">
                {% if address.is_default %}
                <div class="bg-blue-50 text-blue-600 text-xs font-bold px-2 py-1 rounded uppercase tracking-wider">
                    Default
                </div>
                {% else %}
                <div>
                </div>
                {% endif %}

                <div class="flex space-x-2">
                    <a href='{% url "edit_address" address.id %}'>
                        <button class="text-gray-400 hover:text-blue-600 transition-colors" title="Edit">
                            <i data-lucide="pencil" class="w-4 h-4"></i>
                        </button>
                    </a>
                    <!-- Delete Button with SweetAlert -->
                    <button onclick="confirmDelete('{{ address.id }}')"
                        class="text-gray-400 hover:text-red-500 transition-colors" title="Delete">
                        <i data-lucide="trash-2" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
            <!-- Hidden CSRF for JS -->
            {% csrf_token %}
            <h3 class="font-bold text-gray-900 text-lg mb-2">{{address.name}}</h3>
            <p class="text-gray-600 text-sm leading-relaxed mb-4">
                {{address.street_address}}<br>
                {{address.state}}, {{address.postal_code}}<br>
                {{address.country}}
            </p>
            <p class="text-gray-500 text-sm font-medium">Phone:
                <span class="text-gray-900">
                    {{address.phone}}
                </span>
            </p>
        </div>
        {% endfor %}

    </div>

</main>
{% endblock %}