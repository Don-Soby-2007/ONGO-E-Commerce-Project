{% extends 'accounts/base_profile.html' %}
{% load static %}

{% block title %}Edit Address - ONGO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/accounts/manage_address.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/accounts/add_address_validation.js' %}"></script>
{% endblock %}

{% block profile_content %}
<main class="flex-1 overflow-y-auto p-8 md:p-16 bg-gray-50 flex flex-col items-center justify-start w-full">

    <!-- Form Container -->
    <div class="w-full max-w-2xl bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden">

        <!-- Section Header -->
        <div class="flex items-center justify-between px-8 py-6 border-b border-gray-100 bg-white">
            <h2 class="text-xl font-bold text-gray-900">Edit Address</h2>
            <a href="{% url 'manage_address' %}"
                class="text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-full hover:bg-gray-100">
                <i data-lucide="x" class="w-6 h-6"></i>
            </a>
        </div>

        <!-- Form -->
        <form id="add-address-form" method="POST" class="p-8 space-y-6">
            {% csrf_token %}

            <!-- Full Name -->
            <div>
                <label for="fullName" class="block text-sm font-semibold text-gray-700 mb-2">Full Name</label>
                <input type="text" id="fullName" value="{{address.name}}" name="fullName"
                    placeholder="Enter your full name"
                    class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
            </div>

            <!-- Street Address -->
            <div>
                <label for="streetAddress" class="block text-sm font-semibold text-gray-700 mb-2">Street
                    Address</label>
                <input type="text" id="streetAddress" name="streetAddress" value="{{address.street_address}}"
                    placeholder="Enter your street address"
                    class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
            </div>

            <!-- Phone Number -->
            <div>
                <label for="phoneNumber" class="block text-sm font-semibold text-gray-700 mb-2">Phone
                    Number</label>
                <input type="tel" id="phoneNumber" name="phoneNumber" value="{{address.phone}}"
                    placeholder="Enter your phone number"
                    class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
            </div>

            <!-- City, State, Zip -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label for="city" class="block text-sm font-semibold text-gray-700 mb-2">City</label>
                    <input type="text" id="city" name="city" value="{{address.city}}" placeholder="Enter city"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
                </div>
                <div>
                    <label for="state" class="block text-sm font-semibold text-gray-700 mb-2">State/Province</label>
                    <input type="text" id="state" name="state" value="{{address.state}}" placeholder="Enter state"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
                </div>
                <div>
                    <label for="postalCode" class="block text-sm font-semibold text-gray-700 mb-2">Postal
                        Code</label>
                    <input type="text" id="postalCode" name="postalCode" value="{{address.postal_code}}"
                        placeholder="Enter code"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all placeholder-gray-400 text-sm">
                </div>
            </div>

            <!-- Country -->
            <div>
                <label for="country" class="block text-sm font-semibold text-gray-700 mb-2">Country</label>
                <div class="relative">
                    <select id="country" name="country"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:border-black focus:ring-1 focus:ring-black outline-none transition-all bg-white text-sm appearance-none cursor-pointer">
                        <option value="" disabled selected>Select Country</option>
                        <option value="india" {% if address.country=="india" %} selected {% endif %}>India</option>
                        <option value="usa" {% if address.country=="usa" %} selected {% endif %}>United States</option>
                        <option value="uk" {% if address.country=="uk" %} selected {% endif %}>United Kingdom</option>
                        <option value="canada" {% if address.country=="canada" %} selected {% endif %}>Canada</option>
                        <option value="australia" {% if address.country=="australia" %} selected {% endif %}>Australia
                        </option>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500">
                        <i data-lucide="chevron-down" class="w-4 h-4"></i>
                    </div>
                </div>
            </div>

            <!-- Default Address Checkbox -->
            {% if address.is_default %}
            <div class="flex items-center">
                <input hidden type="checkbox" id="defaultAddress" name="defaultAddress" checked
                    class="w-4 h-4 text-black border-gray-300 rounded focus:ring-black cursor-pointer">
                <label for="defaultAddress" class="ml-3 text-sm text-gray-800">
                    This my default shipping address<br><span class="text-sm text-red-400 ">(if you want to change the
                        default address do chek the checkbox of another address)</span></label>
            </div>
            {% else %}
            <div class="flex items-center">
                <input type="checkbox" id="defaultAddress" name="defaultAddress"
                    class="w-4 h-4 text-black border-gray-300 rounded focus:ring-black cursor-pointer">
                <label for="defaultAddress" class="ml-3 text-sm text-gray-700 cursor-pointer select-none">Make
                    this my default shipping address</label>
            </div>
            {% endif %}


            <!-- Action Buttons -->
            <div class="flex items-center space-x-4 pt-4 border-t border-gray-100 mt-6">
                <button type="submit"
                    class="flex-1 bg-black text-white px-6 py-3 rounded-lg text-sm font-semibold hover:bg-gray-800 transition-colors shadow-md">
                    Save Address
                </button>
                <a href="{% url 'manage_address' %}"
                    class="flex-1 text-center px-6 py-3 rounded-lg text-sm font-semibold text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors border border-gray-200">
                    Cancel
                </a>
            </div>
        </form>
    </div>

</main>
{% endblock %}