{% extends 'accounts/base_profile.html' %}
{% load static %}

{% block title %}Manage Password - ONGO{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/accounts/manage_password.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/accounts/manage_password.js' %}"></script>
{% endblock %}

{% block profile_content %}
<main class="flex-1 overflow-y-auto p-6 md:p-12 bg-gray-50 flex flex-col items-center justify-start mt-20">

    <div class="w-full max-w-2xl mb-8 mt-8">
        <p class="text-sm text-gray-500"><a href="{% url 'home' %}" class="hover:text-black transition-colors">Home</a>
            / <a href="{% url 'profile' %}" class="hover:text-black transition-colors">Account</a> / <span
                class="text-black font-semibold">Manage
                Password</span></p>
        <h2 class="text-2xl font-bold text-black mt-2">Manage Password</h2>
    </div>

    <!-- Password Form Card -->
    <div class="bg-white w-full max-w-2xl rounded-2xl shadow-sm border border-gray-100 p-8">
        <form method='POST' action='{% url "manage_password" %}' id="password-form" class="space-y-6">
            {% csrf_token %}
            <!-- Old Password -->
            <div>
                <label for="old-password" class="block text-sm font-medium text-gray-700 mb-1">Old
                    Password</label>
                <div class="relative">
                    <input type="password" id="old-password" name="old_password" placeholder="Enter current password"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all outline-none text-sm pr-12">
                    <button type="button"
                        class="absolute inset-y-0 right-0 px-4 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none toggle-password"
                        data-target="old-password">
                        <i data-lucide="eye" class="w-5 h-5"></i>
                    </button>
                </div>
                <div id="old-password-error" class="text-xs text-red-500 mt-1 hidden"></div>
            </div>

            <!-- New Password -->
            <div>
                <label for="new-password" class="block text-sm font-medium text-gray-700 mb-1">New
                    Password</label>
                <div class="relative">
                    <input type="password" id="new-password" name="new_password" placeholder="Enter new password"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all outline-none text-sm pr-12">
                    <button type="button"
                        class="absolute inset-y-0 right-0 px-4 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none toggle-password"
                        data-target="new-password">
                        <i data-lucide="eye" class="w-5 h-5"></i>
                    </button>
                </div>
                <div id="new-password-error" class="text-xs mt-1 hidden"></div>
                <!-- Password Requirements -->
                <div id="password-requirements" class="mt-2 p-3 bg-gray-50 rounded-lg border border-gray-200 hidden">
                    <p class="text-xs font-semibold text-gray-700 mb-2">Password must contain:</p>
                    <ul class="space-y-1 text-xs">
                        <li id="req-length" class="flex items-center text-gray-500">
                            <i data-lucide="circle" class="w-3 h-3 mr-2"></i>
                            At least 8 characters
                        </li>
                        <li id="req-lowercase" class="flex items-center text-gray-500">
                            <i data-lucide="circle" class="w-3 h-3 mr-2"></i>
                            One lowercase letter (a-z)
                        </li>
                        <li id="req-uppercase" class="flex items-center text-gray-500">
                            <i data-lucide="circle" class="w-3 h-3 mr-2"></i>
                            One uppercase letter (A-Z)
                        </li>
                        <li id="req-number" class="flex items-center text-gray-500">
                            <i data-lucide="circle" class="w-3 h-3 mr-2"></i>
                            One number (0-9)
                        </li>
                        <li id="req-special" class="flex items-center text-gray-500">
                            <i data-lucide="circle" class="w-3 h-3 mr-2"></i>
                            One special character (@$!%*?&)
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Confirm Password -->
            <div>
                <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirm New
                    Password</label>
                <div class="relative">
                    <input type="password" id="confirm-password" name="confirm_password"
                        placeholder="Confirm new password"
                        class="w-full px-4 py-3 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all outline-none text-sm pr-12">
                    <button type="button"
                        class="absolute inset-y-0 right-0 px-4 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none toggle-password"
                        data-target="confirm-password">
                        <i data-lucide="eye" class="w-5 h-5"></i>
                    </button>
                </div>
                <div id="confirm-password-error" class="text-xs text-red-500 mt-1 hidden"></div>
            </div>

            <!-- Buttons -->
            <div class="flex items-center space-x-4 pt-4">
                <button type="submit"
                    class="px-6 py-2.5 bg-black text-white text-sm font-semibold rounded-lg shadow-md hover:bg-gray-800 transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-gray-900">
                    Change Password
                </button>
                <button type="button" id="clear-btn"
                    class="px-6 py-2.5 bg-white border border-gray-300 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-50 transition-colors focus:ring-2 focus:ring-offset-2 focus:ring-gray-200">
                    Clear
                </button>
            </div>
        </form>
    </div>

</main>
{% endblock %}